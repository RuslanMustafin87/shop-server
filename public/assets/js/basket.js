!function(){"use strict";var e,t={780:function(e,t,n){var r=n(690),o=n(671),a=n(803),i=(new r.Z,document.forms.formOrder),c=function e(t,n,r){(0,o.Z)(this,e),this.id=t,this.name=n,this.price=r};i.addEventListener("submit",(function(e){e.preventDefault();var t=Array.from(document.querySelectorAll(".product")),n=[],r=0;t.forEach((function(e){r+=parseInt(e.dataset.price)})),t.forEach((function(e,t){n[t]=new c(e.dataset.id,e.dataset.name,e.dataset.price)})),fetch("http://127.0.0.1:3007/api/clients",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({name:i.name.value,phone:i.phone.value,sum:r,productList:n})}).then((function(e){return e.json()}),(function(e){a.Z.start("Сервер не доступен")})).then((function(e){a.Z.start(e.status)}))}));var u=new r.Z,s=document.querySelector(".basket__button-reset"),d=document.querySelector(".products"),f=document.querySelector(".basket__sum");function l(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function p(e){var t,n,r=document.createElement("li"),o=document.createElement("button");r.classList.add("product","products__item"),o.classList.add("product__button-delete"),o.innerHTML="Удалить",r.append(o),e.forEach((function(e){var t=r.cloneNode(!0);t.dataset.id=e.id,t.dataset.name=e.name,t.dataset.price=e.price,t.prepend("".concat(e.name,": ").concat(e.price)),t.style.backgroundColor=e.background,d.append(t)})),f.innerHTML=(t=e,n=0,(t=Array.from(t)).forEach((function(e){n+=parseInt(e.price)})),n)}d.addEventListener("click",(function(e){var t=e.target.closest(".product__button-delete");if(t){var n=t.closest("li");u.deleteProductFromBasket(n.dataset.id),f.innerHTML=parseInt(f.innerHTML)-n.dataset.price,n.remove(),d.firstChild||(d.innerHTML="Корзина пуста")}})),s.addEventListener("click",(function(){l(d),u.resetBasket(),d.innerHTML="Корзина пуста",f.innerHTML=0})),document.addEventListener("DOMContentLoaded",(function(){var e=u.getProductsFromBasket();e?p(e):d.innerHTML="Корзина пуста"})),window.addEventListener("storage",(function(){l(d);var e=u.getProductsFromBasket();e?p(e):d.innerHTML="Корзина пуста"}))}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.m=t,e=[],r.O=function(t,n,o,a){if(!n){var i=1/0;for(d=0;d<e.length;d++){n=e[d][0],o=e[d][1],a=e[d][2];for(var c=!0,u=0;u<n.length;u++)(!1&a||i>=a)&&Object.keys(r.O).every((function(e){return r.O[e](n[u])}))?n.splice(u--,1):(c=!1,a<i&&(i=a));if(c){e.splice(d--,1);var s=o();void 0!==s&&(t=s)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,o,a]},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.j=130,function(){var e={130:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,a,i=n[0],c=n[1],u=n[2],s=0;if(i.some((function(t){return 0!==e[t]}))){for(o in c)r.o(c,o)&&(r.m[o]=c[o]);if(u)var d=u(r)}for(t&&t(n);s<i.length;s++)a=i[s],r.o(e,a)&&e[a]&&e[a][0](),e[i[s]]=0;return r.O(d)},n=self.webpackChunktest=self.webpackChunktest||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var o=r.O(void 0,[592],(function(){return r(780)}));o=r.O(o)}();